<div class="profile-container">
  <header class="profile-header">
    <div class="profile-avatar">
      <div class="avatar-placeholder"></div>
    </div>

    <section class="profile-info">
      <div class="profile-top-row">
        <h1><%= @profile.username %></h1>
        <button class="edit-btn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>
      </div>

      <ul class="profile-stats">
        <li><strong><%= @posts.count %></strong> –¥–æ–ø–∏—Å—ñ–≤</li>
        <li><strong><%= @profile.account.followers.count %></strong> —á–∏—Ç–∞—á—ñ–≤</li>
        <li><strong><%= @profile.account.following.count %></strong> —Å—Ç–µ–∂–∏—Ç—å</li>
      </ul>

      <div class="profile-bio">
        <p class="full-name"><%= @profile.display_name %></p>
        <p><%= @profile.bio %></p>
      </div>
    </section>
  </header>

  <hr class="separator">

  <div class="posts-grid">
  <% # Important fix: use the loop variable 'post' %>
    <% @posts.each do |post| %>
      <div class="post-item">
        <%= link_to post_path(post), class: "post-link" do %>
          <div class="post-overlay">
            <span>‚ù§Ô∏è <%= post.reactions.count %></span>
          </div>
          <div class="post-placeholder">
            <% if post.media_assets.any? %>
              <span class="carousel-icon">üìÅ</span>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>